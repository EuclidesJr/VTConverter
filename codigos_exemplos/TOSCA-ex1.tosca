<?xml version="1.0" encoding="UTF-8"?>
<Definitions id="MinhaDefinicao" name="MinhaDefinicao"
	targetNamespace="http://www.ens-lyon.fr/LIP/RESO/Software/vxdl">
	
<Import importType="http://www.w3.org/2001/XMLSchema"
	namespace="http://www.ens-lyon.fr/LIP/RESO/Software/vxdl"
	schemaLocation="http://www.ens-lyon.fr/LIP/RESO/Software/vxdl VXDL.xsd "/>

<Types>
	<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
		<xs:element name="nodeTestPropriedades">
			<xs:complexType>
				<xs:sequence>
					<xs:element name="location" type="xs:string"/>
					<xs:element name="startDate" type="xs:dateTime"/>
					<xs:element name="totalTime" type="xs:string"/>
					
					<xs:element name="memory" type="capacity" minOccurs="0"
						maxOccurs="1"></xs:element>
					<xs:element name="storage" type="capacity" minOccurs="0"
						maxOccurs="1"></xs:element>
					<xs:element name="cpu" type="cpu" minOccurs="0"
						maxOccurs="1"></xs:element>
					
					<xs:element name="security" type="xs:string"/>
					<xs:element name="reliability" type="xs:string"/>
				</xs:sequence>
			</xs:complexType>
		</xs:element>
		
		<xs:element name="ModeloDeServicoPropriedades">
			<xs:complexType>
				<xs:sequence>
					<xs:element name="user" type="xs:string"/>
					<xs:element name="startDate" type="xs:dateTime"/>
					<xs:element name="totalTime" type="xs:string"/>
				</xs:sequence>
			</xs:complexType>
		</xs:element>
		
		<!-- CPU definition -->
		<xs:complexType name="cpu">
			<xs:sequence>
				<xs:element name="architecture" type="xs:string"
					minOccurs="0" maxOccurs="1"></xs:element>
				<xs:element name="cores" type="capacity" minOccurs="0"
					maxOccurs="1"></xs:element>
				<xs:element name="frequency" type="capacity"
					minOccurs="0" maxOccurs="1"></xs:element>
			</xs:sequence>
		</xs:complexType>
		
		<!-- Capacity definition -->
		<xs:complexType name="capacity">		
			<xs:sequence>
				<xs:element name="unit" type="xs:string" minOccurs="0"
					maxOccurs="1"></xs:element>
				<xs:element name="event" type="xs:string" minOccurs="0"
					maxOccurs="1"></xs:element>
				<xs:choice>
					<xs:element name="interval" type=":interval"
						minOccurs="1" maxOccurs="1" />
					<xs:element name="simple" type="xs:double" minOccurs="1"
						maxOccurs="1" />
					<xs:element name="set" type="xs:double" minOccurs="1"
						maxOccurs="unbounded" />
					<xs:element name="scale" type=":scale" minOccurs="1"
						maxOccurs="1" />
				</xs:choice>
			</xs:sequence>
		</xs:complexType>
			
		<!-- Interval of values -->
		<xs:complexType name="interval">
			<xs:sequence>
				<xs:element name="min" type="xs:double" minOccurs="0"
					maxOccurs="1"></xs:element>
				<xs:element name="max" type="xs:double" minOccurs="0"
					maxOccurs="1"></xs:element>
			</xs:sequence>
		</xs:complexType>
		
		<!-- Scale of values -->
		<xs:complexType name="scale">
			<xs:sequence>
				<xs:element name="min" type="xs:double" minOccurs="1"
					maxOccurs="1"></xs:element>
				<xs:element name="max" type="xs:double" minOccurs="1"
					maxOccurs="1"></xs:element>
				<xs:element name="step" type="xs:double" minOccurs="1"
					maxOccurs="1"></xs:element>
			</xs:sequence>
		</xs:complexType>
				
	</xs:schema>
</Types>

<ServiceTemplate id="MeuModeloDeServico">
	<Tags>
		<Tag name="owner" value="0C7F0E6F-5599-4DF4-B1FC-AE48E61FDD67"/>
	</Tags>
	<Properties>
		<ModeloDeServicoPropriedades>
			<user>userLyon</user>
			<startDate>2010-04-21T08:00:00</startDate>
			<totalTime>PT4H</totalTime>
		</ModeloDeServicoPropriedades>
	</Properties>
	
	<TopologyTemplate id="test">	
	
		<NodeTemplate id="node test" name="node test" type="NodeTestType">
			<Properties>
				<nodeTestPropriedades>
					<location>paris.fr</location>
					<startDate>2010-04-21T08:00:00</startDate>
					<totalTime>PT4H</totalTime>
					<cpu>
						<cores>1</cores>
						<frequency>
							<interval>
								<min>2.0</min>
							</interval>
							<unit>GHz</unit>
						</frequency>
					</cpu>
					<memory>
						<simple>1</simple>
						<unit>GB</unit>
					</memory>
					<storage>
						<interval>
							<min>300</min>
						</interval>
						<unit>GB</unit>
					</storage>
					<security>gold</security>
					<reliability>bronze</reliability>
				</nodeTestPropriedades>
			</Properties>
		</NodeTemplate>

		<NodeTemplate id="software 1" name="software 1" type="SoftwareType"/>
		
		<NodeTemplate id="software 2" name="software 2" type="SoftwareType"/>
		
		<RelationshipTemplate  id="relacao1"
			type="DeployedOn">
			<SourceElement id="software 1"/>
			<TargetElement id="node test"/>
		</RelationshipTemplate>
		
		<RelationshipTemplate  id="relacao2"
			type="DeployedOn">
			<SourceElement ref="software 2"/>
			<TargetElement ref="node test"/>
		</RelationshipTemplate>
		
	</TopologyTemplate>
</ServiceTemplate>

<NodeType name="NodeTestType">
	<PropertiesDefinition element="nodeTestPropriedades"/>
</NodeType>

<NodeType name="SoftwareType"/>

<RelationshipType name="DeployedOn"/>

</Definitions>